<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" 
	layout:decorator="layouts/commonLayout">
<head>
	<meta charset="utf-8">
  	<title>Rookies</title>
</head>
<body>
<div id="page-wrapper" layout:fragment="content">
    <div id="pageWrap">
        
        <article class="sales_detail">
            <h2 class="hidden">디자이너 샵</h2>
            <div class="container">
                <div class="row">
                    <div class="col-xl-8 col-sm-12">
                        <ul class="sales_navigator clearnext">
                            <li><a href="#hairstyleInfo"><i class="xi-comment-o"></i> 헤어스타일 설명</a></li>
                            <li><a href="#portFolio"><i class="xi-border-all"></i> 포트폴리오</a></li>
                            <li><a href="#replySect"><i class="xi-heart-o"></i> 평점/후기(<span class="reply_num"></span>)</a></li>
                        </ul>
                        <section id="hairstyleInfo">
                            <h3 class="hidden">헤어스타일 설명</h3>
                            <figure class="hair_info">
							<!--<div class="img_wrap"></div> -->
								<div class="img_wrap">
									<img th:src="@{${shop.imagePath}}" width="100%" height="100%" style="padding:1px">
								</div>
                                <figcaption>
                                    <h4 th:text="${shop.shopName}" class="hi_title">여자 탈색/염색 스타일링</h4>
                                    <p th:text="${shop.content}" class="hi_des">여자머리탈색 및 염색 스타일링 입니다. 헤어스타일 설명입니다. <br>여자머리탈색 및 염색 스타일링 입니다. 헤어스타일 설명입니다.</p>
                                </figcaption>
                            </figure>
                            <div class="shop_location">
                                <h4 class="location_title sect_sub_title">장소</h4>
                                <p th:text="${shop.location}" class="shop_address">서울특별시 성북구 삼각산동 서경로 124</p>
                                <div class="map">
                                        <iframe th:src="@{'https://www.google.com/maps/embed/v1/place?key=AIzaSyA1DjlvhvauQ8FH43J9YiNx0Jh_rVSzT4M&q=' + ${shop.location}}"
                                        width="100%" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
                                </div>
                        </section>
                        <section id="portFolio" class="pf_wrap">
                            <header class="sect_header clearnext">
                                <h3 class="sect_title">포트폴리오</h3>
									<a th:href="@{'/users/portfolioInfo/' + ${shop.stylist.stylistCode}}">포트폴리오 더보기&nbsp;&nbsp;</a>					
                            </header>
                            <ul th:each="portfolio : ${shop.portfolioImg}" class="pf_list">
                                <li><img th:src="@{${portfolio}}" alt="" class="center-block img-responsive"></li>
                            </ul>
                        </section>
                        <section id="replySect" class="rp_wrap">
                            <div class="rp_write">
  
                             <form id="rpFrm" class="rp_frm" th:action="@{/postscript/enroll}" enctype="multipart/form-data" method="post">
                                    
                                  	 <input type="hidden" name="shop.shopCode" th:value="${shop.shopCode}"><br>
  									<input type="hidden" name="user.id" th:value="${session.user.id}"> <br>
                                    <div class="form-group star_rating">
                                        <div id="starRating"></div>
                                        <input type="hidden" id="starRatingVal" name="grade"  value="" />
                                    </div>
                                    <div class="form-group">
                                        <textarea name="content"  rows="10" class="form-control" placeholder="후기를 작성해 주세요."></textarea>
                                    </div>
                                    <div class="form-group clearnext">
                                        <span class="photo_add">
                                            <input type="file" th:name="postscriptImg" />
                                        </span>
                                        <span class="submit_btn">
                                            <input class="btn btn-default right_btn" type="submit" name="업로드" value="후기등록하기"></input>
                                        </span>
                                    </div>
                                </form>
                                
                            </div>
                            <div th:if="${count} > 0">
                            <div class="rp_average">
                                <h3 class="sect_title">평점/후기 (<span id="count" class="reply_num" th:text="${count}"></span>개)</h3>
                               
                                <div class="w-100 clearfix"></div>
                                <div class="eval_wrap clearnext">
                                	<input type="hidden" id="average" th:value="${average}">
                                    <div id="starRatingReadAverage" class="starrating_read_average"></div>
                                    <span id="ratingResult" class="rating_val"></span>
                                    <span th:text="${opinion}" class="eval_cont"></span>
                                </div>
                                <ul class="rp_photo_list clearfix">
                                    <li class="rp_photo_wrap"></li>
                                    <li class="rp_photo_wrap"></li>
                                    <li class="rp_photo_wrap"></li>
                                    <li class="rp_photo_wrap"></li>
                                    <li class="rp_photo_wrap"></li>
                                </ul>
                            </div>
                            

                            <div th:each="i : ${#numbers.sequence( 1, count)}" class="rp_content">
                                <header class="rp_content_header">
                                    <span id="userThumb" class="user_thumb">
                                       <!--  <i class="xi-user"></i> -->
                                       <img th:src="@{${postscripts[i-1].user.profileImagePath}}"> 
                                    </span>
                                    <span id="userName" class="user_name" th:text="${postscripts[i-1].user.username}"></span>
                                    <span th:text="${postscripts[i-1].writeDate}" class="date"></span>
                                </header>
                                <div class="w-100 clearfix"></div>
                                <div class="eval_wrap">
 									<input type="hidden" th:id="${i}" th:value="${postscripts[i-1].grade}">
                                    <span id="starRatingReadOnly" th:class="${i}"></span>
                                    
                                    <span th:text="${postscripts[i-1].opinion}" class="eval_cont"></span>
                                    <div class="clearfix w-100"></div>
                                    <p id="replyDes" th:utext="${postscripts[i-1].content}" class="reply_des"></p>
                                    
                                    <div class="rp_photo_wrap">
                                    	<img th:src="@{${postscripts[i-1].imagePath}}" alt="" class="center-block img-responsive">
                                    </div>
                                    
                                    <!-- <button class="reply_more_btn">더보기</button> -->
                                </div>
                            </div>
                            </div>
                        </section>
                        </div>
                        <div class="col-xl-4 col-sm-12">
                            <aside id="reserveBox" class="reserve_box">
                                    <header>
                                        <div class="row">
                                            <div class="col-lg-3">
                                                <div >
                                                    <img th:src="@{${stylist.user.profileImagePath}}" class="designer_profile" />
                                                </div>
                                            </div>
                                            <div class="col-lg-9">
                                                <div class="reserve_info">
                                                    <span class="designer_name" th:text="${'Designer' + shop.stylist.stylistNickname}">Designer 은진</span>
                                                    <span th:text="${shop.shopName}" class="hairstyle_name">여자 탈색/염색 스타일링</span>
                                                </div>
                                            </div>
                                        </div>
                                    </header>
                                <form th:action="@{'/book/'+${shop.shopCode}}" method="post">
                                	<input type="hidden" name="stylistCode" th:value="${stylist.stylistCode}">
                                    <div class="form-group mt-5">
                                        <label for="exampleFormControlSelect1">상품 선택</label>
                                        <select name="productCode" class="form-control" id="productSelect">
                                           <option th:each="product : ${shop.products}" th:value="${product.productCode}">
                                           		<span th:text="${product.productName}+' '+${product.productPriceStr}"></span>원
                                           </option>
                                        </select>
                                    </div>
                                    <div class="form-group mt-2">
                                        <label for="exampleFormControlSelect1">옵션 선택</label>
                                        <select name="optionCode" class="form-control" id="optionSelect">
                                           <option th:each="option : ${shop.options}" th:value="${option.optionCode}">
                                           		<span th:text="${option.optionName}+' '+${option.optionPriceStr}"></span>원
                                           	</option>
                                        </select>
                                    </div>
                                    <div class="price_box text-right">
                                        <p>총 금액<span id="price" th:text="${shop.products[0].productPrice}+${shop.options[0].optionPrice}"></span>원</p>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="exampleFormControlSelect1">날짜 / 시간 선택</label>
                                        <input id="bookUpload" readonly="readonly" name="bookDate" class="form-control" type="text" placeholder="예약 날짜를 선택해주세요">
	                            		<div id="bookDatepicker" class="calendar"></div>
                                        <br>
                                        <input id="bookTimeUpload" readonly="readonly" name="bookTime" class="form-control" type="text" placeholder="예약 시간을 선택해주세요">
                                    </div>
                                    <button type="submit" class="btn btn-default reserve_btn">예약하기</button>
                                </form>
                                <input type="hidden" id="startDate" th:value="${shop.shopDate}">
                                <input type="hidden" id="endDate" th:value="${shop.shopDay}">
                                <input type="hidden" id="startTime" th:value="${shop.shopTime}">
                                <input type="hidden" id="endTime" th:value="${shop.shopEndTime}">
                            </aside>
                        </div>

                    </div>
                </div>
        </article>
        </div>
        <div class="to-top-btn"><i class="xi-caret-up"></i></div>
        </div>
</body>

</html>
